/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/game.js":
/*!*********************!*\
  !*** ./src/game.js ***!
  \*********************/
/***/ (() => {

eval("function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar game_W = 20;\nvar game_H = 20;\nvar WW = 0;\nvar size = 3;\nvar II = size - 1,\n    JJ = size - 1;\nvar xStart = -1,\n    yStart = -1,\n    xEnd = -1,\n    yEnd = -1;\nvar xs = 0,\n    ys = 0;\nvar win = false;\nvar delayEnd = 0;\nvar timeDelay = touch = 300;\nvar bg = new Image();\nbg.src = \"images/background.png\";\nim = [];\nvar rd = Math.floor(Math.random() * 99999) % 7 + 1;\n\nfor (var i = 0; i <= 9; i++) {\n  im[i] = new Image();\n  im[i].src = \"images/Data/\" + rd + \"/\" + i + \".jpg\";\n}\n\nvar data = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];\n\nvar game = /*#__PURE__*/function () {\n  function game() {\n    _classCallCheck(this, game);\n\n    this.canvas = null;\n    this.context = null;\n    this.init();\n  }\n\n  _createClass(game, [{\n    key: \"init\",\n    value: function init() {\n      this.canvas = document.createElement(\"canvas\");\n      this.context = this.canvas.getContext(\"2d\");\n      document.body.appendChild(this.canvas);\n      this.render();\n\n      do {\n        this.initMatrix();\n      } while (this.checkWin());\n\n      this.loop();\n      this.listenKeyboard();\n      this.listenTouch();\n    }\n  }, {\n    key: \"initMatrix\",\n    value: function initMatrix() {\n      for (var N = 0; N < 2 * size * size; N++) {\n        var x1, x2, y1, y2;\n\n        do {\n          x1 = Math.floor(Math.random() * (size - 1));\n          y1 = Math.floor(Math.random() * (size - 1));\n        } while (x1 == size - 1 && y1 == size - 1);\n\n        do {\n          x2 = Math.floor(Math.random() * (size - 1));\n          y2 = Math.floor(Math.random() * (size - 1));\n        } while (x2 == size - 1 && y2 == size - 1 || x2 == x1 && y2 == y1);\n\n        var temp = data[x1][y1];\n        data[x1][y1] = data[x2][y2];\n        data[x2][y2] = temp;\n      }\n    }\n  }, {\n    key: \"listenTouch\",\n    value: function listenTouch() {\n      var _this = this;\n\n      document.addEventListener(\"touchmove\", function (evt) {\n        if (touch > 0) return;\n        if (evt) evt = window.event;\n        var x = evt.touches[0].pageX;\n        var y = evt.touches[0].pageY;\n        x -= (game_W - WW) / 2;\n        y -= (game_H - WW) / 2;\n        xEnd = xStart;\n        yEnd = yStart;\n\n        if (Math.abs(xs - x) > Math.abs(ys - y)) {\n          if (x > xs) yEnd = yStart + 1;else yEnd = yStart - 1;\n        } else {\n          if (y > ys) xEnd = xStart + 1;else xEnd = xStart - 1;\n        }\n\n        if (xEnd == II || yEnd == JJ) _this.solve();\n      });\n      document.addEventListener(\"touchstart\", function (evt) {\n        if (touch > 0) return;\n        var x = evt.touches[0].pageX;\n        var y = evt.touches[0].pageY;\n        x -= (game_W - WW) / 2;\n        y -= (game_H - WW) / 2;\n        xs = x;\n        ys = y;\n        xStart = Math.floor(3 * y / WW);\n        yStart = Math.floor(3 * x / WW);\n      });\n    }\n  }, {\n    key: \"listenKeyboard\",\n    value: function listenKeyboard() {\n      var _this2 = this;\n\n      document.addEventListener(\"keydown\", function (key) {\n        if (touch > 0) return;\n\n        switch (key.keyCode) {\n          case 37:\n            xEnd = II;\n            yEnd = JJ;\n            xStart = xEnd;\n            yStart = yEnd + 1;\n            break;\n\n          case 38:\n            xEnd = II;\n            yEnd = JJ;\n            xStart = xEnd + 1;\n            yStart = yEnd;\n            break;\n\n          case 39:\n            xEnd = II;\n            yEnd = JJ;\n            xStart = xEnd;\n            yStart = yEnd - 1;\n            break;\n\n          case 40:\n            xEnd = II;\n            yEnd = JJ;\n            xStart = xEnd - 1;\n            yStart = yEnd;\n            break;\n        }\n\n        _this2.solve();\n      });\n    }\n  }, {\n    key: \"solve\",\n    value: function solve() {\n      if (Math.abs(xStart - xEnd) + Math.abs(yStart - yEnd) == 1 && this.checkXY(xStart, yStart) && this.checkXY(xEnd, yEnd)) {\n        if (II == xStart && xStart == xEnd && (yStart - yEnd) * (yStart - JJ) >= 0) {\n          if (JJ > yStart) {\n            for (var j = JJ; j > yStart; j--) {\n              data[II][j] = data[II][j - 1];\n            }\n          } else {\n            for (var j = JJ; j < yStart; j++) {\n              data[II][j] = data[II][j + 1];\n            }\n          }\n\n          data[xStart][yStart] = size * size;\n          II = xStart;\n          JJ = yStart;\n        } else if (JJ == yStart && yStart == yEnd && (xStart - xEnd) * (xStart - II) >= 0) {\n          if (II > xStart) {\n            for (var i = II; i > xStart; i--) {\n              data[i][JJ] = data[i - 1][JJ];\n            }\n          } else {\n            for (var i = II; i < xStart; i++) {\n              data[i][JJ] = data[i + 1][JJ];\n            }\n          }\n\n          data[xStart][yStart] = size * size;\n          II = xStart;\n          JJ = yStart;\n        }\n      }\n    }\n  }, {\n    key: \"checkXY\",\n    value: function checkXY(x, y) {\n      if (x < 0 || x >= size || y < 0 || y >= size) return false;\n      return true;\n    }\n  }, {\n    key: \"checkWin\",\n    value: function checkWin() {\n      for (var i = 0; i < size; i++) {\n        for (var j = 0; j < size; j++) {\n          if (data[i][j] != i * size + j + 1) return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"loop\",\n    value: function loop() {\n      var _this3 = this;\n\n      this.update();\n      this.draw();\n      this.messageWin();\n      setTimeout(function () {\n        return _this3.loop();\n      }, 30);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (win) return;\n      this.render();\n      if (!win) touch--; // console.log(touch);\n    }\n  }, {\n    key: \"messageWin\",\n    value: function messageWin() {\n      if (this.checkWin()) {\n        if (delayEnd++ > 50) {\n          win = true;\n          delayEnd = -1000000000;\n          window.alert(\"You Win\");\n          location.reload();\n        }\n\n        touch = 1000000000;\n      }\n\n      if (touch > 0) {\n        this.context.drawImage(im[0], (game_W - WW) / 2, (game_H - WW) / 2, WW, WW);\n\n        if (touch < timeDelay) {\n          this.context.fillStyle = \"#66FFFF\";\n          this.context.fillRect((game_W - WW) / 2 - 4 - (WW + 8) * (touch / timeDelay) / 2 + WW / 2, (game_H - WW) / 2 + WW + 16, (WW + 8) * (touch / timeDelay), WW / 10);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.canvas.width = document.documentElement.clientWidth;\n      this.canvas.height = document.documentElement.clientHeight;\n      game_W = this.canvas.width;\n      game_H = this.canvas.height;\n      WW = 0.7 * Math.min(game_W, game_H);\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      this.clearScreen();\n\n      for (var i = 0; i < 3; i++) {\n        for (var j = 0; j < 3; j++) {\n          if (data[i][j] != size * size) {\n            var y = i * WW / 3 + (game_H - WW) / 2;\n            var x = j * WW / 3 + (game_W - WW) / 2;\n            this.context.drawImage(im[data[i][j]], x, y, WW / 3, WW / 3);\n          }\n        }\n      }\n\n      for (var j = 0; j <= 3; j++) {\n        var y = 0 * WW / 3 + (game_H - WW) / 2;\n        var x = j * WW / 3 + (game_W - WW) / 2;\n        this.context.beginPath();\n        this.context.strokeStyle = \"#66FFFF\";\n        this.context.lineWidth = 8;\n        this.context.moveTo(x, y - 4);\n        this.context.lineTo(x, y + WW + 4);\n        this.context.stroke();\n        y = 0 * WW / 3 + (game_W - WW) / 2;\n        x = j * WW / 3 + (game_H - WW) / 2;\n        this.context.beginPath();\n        this.context.strokeStyle = \"#66FFFF\";\n        this.context.lineWidth = 8;\n        this.context.moveTo(y, x);\n        this.context.lineTo(y + WW, x);\n        this.context.stroke();\n      }\n    }\n  }, {\n    key: \"clearScreen\",\n    value: function clearScreen() {\n      this.context.clearRect(0, 0, game_W, game_H);\n      if (bg.width / game_W < bg.height / game_H) this.context.drawImage(bg, 0, (bg.height - game_H * (bg.width / game_W)) / 2, bg.width, game_H * (bg.width / game_W), 0, 0, game_W, game_H);else this.context.drawImage(bg, (bg.width - game_W * (bg.height / game_H)) / 2, 0, game_W * (bg.height / game_H), bg.height, 0, 0, game_W, game_H);\n    }\n  }]);\n\n  return game;\n}();\n\nvar g = new game();\n\n//# sourceURL=webpack://picture-puzzle-html5/./src/game.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/game.js"]();
/******/ 	
/******/ })()
;